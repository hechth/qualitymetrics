<tool id="quality_control" name="Quality Control" version="stat_2014.09.04">
  <description>Analyses data to check its quality according to: CV</description>
  <command interpreter="Rscript">
	QC_wrap.R
      dataMatrix_in "$dataMatrix_in"
      sampleMetadata_in "$sampleMetadata_in"
      variableMetadata_in "$variableMetadata_in"
              
      CV "${CV_condition.CV}"
      #if str($CV_condition.CV ) == 'TRUE':
        Compa "${CV_condition.Compa}"
        seuil  "${CV_condition.seuil}"
      #else:
        Compa "TRUE"
        seuil "1"
      #end if
      
      dataMatrix_out "$dataMatrix_out"
      sampleMetadata_out "$sampleMetadata_out"
      variableMetadata_out "$variableMetadata_out"
  </command>
  
  <inputs>
    <param name="dataMatrix_in" type="data" label="Data Matrix file " help="" format="tabular" />
    <param name="sampleMetadata_in" type="data" label="Sample metadata file " help="" format="tabular" />
    <param name="variableMetadata_in" type="data" label="Variable metadata file " help="" format="tabular" />
	
    <conditional name="CV_condition">
      <param name="CV" type="select" label="Coefficient of Variation " help="">
        <option value="FALSE">no</option>
        <option value="TRUE">yes</option>
      </param>
      <when value="TRUE">
        <param name="Compa" label="Which type of CV calculation should be done " type="select" display="radio" help="">
          <option value="TRUE">comparison between pool and sample CVs</option>
          <option value="FALSE">analyse according to pool CV</option>
        </param>
        <param name="seuil" type="float" label="Threshold " value="1.25" min="0.0000000000000001" help="if comparing pool and sample CVs, corresponds to the max ratio tolerated (basicly between 1.0 and 1.25) ; else corresponds to the max pool CV tolerated (basicly 0.3)"/>
      </when>
    </conditional>
  </inputs>
  
  <outputs>
    <data name="dataMatrix_out" label="${tool.name}_${dataMatrix_in.name}" format="tabular" ></data>
    <data name="sampleMetadata_out" label="${tool.name}_${sampleMetadata_in.name}" format="tabular" ></data>
    <data name="variableMetadata_out" label="${tool.name}_${variableMetadata_in.name}" format="tabular" ></data>
  </outputs>
  
  <help>

.. class:: infomark

**Authors** Marion Landi and Melanie Petera

---------------------------------------------------

==============
Quality Control
==============

-----------
Description
-----------


	</help>
</tool>